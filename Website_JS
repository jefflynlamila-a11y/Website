document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('nav a');
    const nav = document.querySelector('nav.navbar') || document.querySelector('nav');
    const onScroll = () => {
        if (!nav) return;
        const threshold = 20;
        if (window.scrollY > threshold) {
            nav.classList.add('scrolled');
        } else {
            nav.classList.remove('scrolled');
        }
    };
    onScroll();
    window.addEventListener('scroll', onScroll);

    navLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href.startsWith('#')) {
                e.preventDefault();

                const targetSection = document.querySelector(href);
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            }
        });
    });
    const hamburgerBtn = document.getElementById('hamburger-btn');
    const aboutSidebar = document.getElementById('about-sidebar');
    const closeBtn = document.getElementById('close-btn');

    if (hamburgerBtn && aboutSidebar) {
        const openSidebar = () => {
            aboutSidebar.classList.add('open');
            aboutSidebar.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden'; 
        };
        const closeSidebar = () => {
            aboutSidebar.classList.remove('open');
            aboutSidebar.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        };

        hamburgerBtn.addEventListener('click', openSidebar);
        if (closeBtn) closeBtn.addEventListener('click', closeSidebar);
        document.addEventListener('click', (e) => {
            if (!aboutSidebar.classList.contains('open')) return;
            if (e.target === aboutSidebar || aboutSidebar.contains(e.target)) return;
            if (e.target === hamburgerBtn) return;
            closeSidebar();
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && aboutSidebar.classList.contains('open')) closeSidebar();
        });
    }
});
